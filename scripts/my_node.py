#!/usr/bin/env python
# coding: utf-8

import os
import roslib
import rospy
import math
import numpy as np
import tf
import turtlesim.srv
import numpy as np
import geometry_msgs.msg as gm

def constrain(x, min, max):
    if x < min:
        x = min
    elif x > max:
        x = max
    return x

def euler_to_quaternion(euler):
    q = tf.transformations.quaternion_from_euler(euler.x, euler.y, euler.z)
    return gm.Quaternion(x=q[0], y=q[1], z=q[2], w=q[3])

class PurePursuitControl:
    def __init__(self, trajectory):
            self.trajectory = trajectory
            self.integral = 0
            self.error_angle = [0, 0]

    def getDistance(self, pose, ind):
        tx = self.trajectory[ind][0]
        ty = self.trajectory[ind][1]
        L = math.sqrt((tx - pose[0])**2 + (ty - pose[1])**2)
        return L

    def getLiner(self, pose, ind):
        tx = self.trajectory[ind][0]
        ty = self.trajectory[ind][1]
        L = math.sqrt((tx - pose[0])**2 + (ty - pose[1])**2)
        Kp = 2.0
        liner = Kp * L
        return liner

    def getOmega(self, pose, ind):
        Kp = 10.0
        Ki = 0.0
        Kd = -0.0

        tx = self.trajectory[ind][0]
        ty = self.trajectory[ind][1]

        self.error_angle[0] = math.atan2(ty - pose[1], tx - pose[0]) - pose[2]

        self.integral += self.error_angle[0]

        p = Kp * self.error_angle[0]
        i = Ki * self.integral
        d = Kd * (self.error_angle[1] - self.error_angle[0])
        self.error_angle[1] = self.error_angle[0]
        return p + d


if __name__ == '__main__':
    rospy.init_node('my_node')

    pub_initialpose = rospy.Publisher('initialpose', gm.PoseWithCovarianceStamped, queue_size=100)
    pub_vel = rospy.Publisher('cmd_vel', gm.Twist, queue_size=1)
    pub_trajectory = rospy.Publisher('trajectory_arry', gm.PoseArray, queue_size=100)
    pub_terget_pos = rospy.Publisher('terget_pos', gm.PoseStamped, queue_size=100)
    listener = tf.TransformListener()

    # 現在の同じディレクトリ内の「route.csv」を読み込み
    # file_name = os.path.dirname(__file__) + "/route.csv"
    # p2 = np.genfromtxt(file_name, delimiter=',', filling_values = 0)
    p2 = [[0.0,0.0],[0.0043942815000000005,0.0006123285],[0.008786126,0.0012243140000000002],[0.013175533500000001,0.0018359565],[0.017562504,0.0024472560000000005],[0.0219470375,0.0030582125],[0.026329134,0.0036688260000000005],[0.0307087935,0.0042790965],[0.034648403415,0.004828046685000001],[0.039023432615,0.005437665485000001],[0.043396024815,0.006046941285],[0.047766180015,0.006655874085000001],[0.052133898215,0.007264463885000001],[0.056499179415,0.007872710685000001],[0.060862023615000004,0.008480614485000001],[0.06522243081500001,0.009088175285000001],[0.069580401015,0.009695393085],[0.07393593421500001,0.010302267885],[0.078289030415,0.010908799685],[0.08263968961500001,0.011514988485000002],[0.086987911815,0.012120834285000001],[0.09133369701500002,0.012726337085000003],[0.09567704521499999,0.013331496885],[0.10001795641500001,0.013936313685],[0.104790144,0.014601216000000002],[0.10912593750000002,0.015205312500000002],[0.11345929400000002,0.015809066],[0.1177902135,0.0164124765],[0.122118696,0.017015544],[0.1264447415,0.0176182685],[0.13076835,0.01822065],[0.1350895215,0.0188226885],[0.139408256,0.019424384000000003],[0.1437245535,0.020025736500000002],[0.14803841400000003,0.020626746000000005],[0.15234983750000003,0.021227412500000004],[0.157089588615,0.021887749485000003],[0.16139589441500002,0.022487695685],[0.16569976321500002,0.023087298885000003],[0.17000119501500002,0.023686559085000006],[0.174300189815,0.024285476285000003],[0.17859674761500005,0.024884050485000007],[0.18289086841500005,0.025482281685000004],[0.187182552215,0.026080169885],[0.19190058966,0.02673745074],[0.19618715576000004,0.027334618640000006],[0.20047128486000004,0.027931443540000007],[0.20475297696,0.02852792544],[0.20903223206,0.029124064340000002],[0.21373659793500002,0.029779420965000004],[0.21801073533500004,0.030374839565000006],[0.22228243573500003,0.030969915165000004],[0.226551699135,0.031564647765],[0.230818525535,0.032159037365000004],[0.23550921984000003,0.032812469760000004],[0.23977092854,0.033406139060000006],[0.24403020024000005,0.03399946536000001],[0.24828703494,0.034592448660000004],[0.252966738375,0.035244334125],[0.25721845537500004,0.035836597125],[0.261467735375,0.036428517125000004],[0.265714578375,0.03702009412500001],[0.27038329094,0.03767043266],[0.27462501624,0.038261289360000006],[0.27886430454,0.03885180306],[0.28310115584,0.039441973760000006],[0.28775887753500007,0.04009076536500001],[0.2919906111350001,0.040680215765000007],[0.296219907735,0.041269323164999996],[0.30086931926000005,0.04191694514000001],[0.30509349816000003,0.042505332240000006],[0.30931524006,0.04309337634],[0.313956341415,0.04373982868500001],[0.3181729656150001,0.04432715248500001],[0.3223871528150001,0.044914133285000005],[0.327019944,0.045559416],[0.3312290135,0.0461456765],[0.33543564600000003,0.04673159400000001],[0.34006012701500005,0.047375707085],[0.344261641815,0.04796090428500001],[0.348460719615,0.04854575848500001],[0.35307689046000007,0.04918870194000001],[0.3572708505600001,0.049772835840000015],[0.361881391935,0.050414986965000005],[0.366070234335,0.050998400565000004],[0.370256639735,0.051581471165000004],[0.37485887094000003,0.05222245266000001],[0.37904015864,0.05280480296000001],[0.3836367603750001,0.053444992125000014],[0.3878129303750001,0.05402662212500001],[0.39240390264,0.05466601896],[0.39657495494000006,0.05524692866000001],[0.40074357024,0.05582749536000001],[0.40532623233500004,0.05646572256500001],[0.40948972993500005,0.05704556896500001],[0.41406676256,0.05768300384000001],[0.41822514246000003,0.058262129940000004],[0.422796545615,0.05889877248500001],[0.426949807815,0.05947717828500001],[0.4315155815,0.060113028500000006],[0.43566372600000003,0.06069071400000001],[0.44022387021500003,0.06132577188500002],[0.444366897015,0.061902737085000006],[0.44892141176,0.06253700264],[0.45305932086000006,0.06311324754000001],[0.4576082061350001,0.06374672076500001],[0.46174099753500003,0.06432224536500002],[0.46628425334000007,0.06495492626000002],[0.47082456037500003,0.06558719212500001],[0.474949553375,0.066161619125],[0.47948423094000003,0.06679309266000001],[0.48360410624000005,0.06736679936000001],[0.4881331543350001,0.06799748056500002],[0.49224791193500006,0.06857046696500001],[0.49677133056,0.06920035584],[0.5012918004150001,0.06982982968500001],[0.5053987596150001,0.07040171848500001],[0.5099136000000001,0.07103040000000001],[0.514425491615,0.07165866648500001],[0.518524652415,0.07222945768500001],[0.5230309145600001,0.07285693184000001],[0.52712495766,0.07342700274000001],[0.531625590335,0.074053684565],[0.5361232742400001,0.07467995136000001],[0.54020951894,0.07524892466000002],[0.544701573375,0.075874399125],[0.54919067904,0.07649945856000001],[0.55326912534,0.07706733426000001],[0.5577526015350001,0.077691601365],[0.5622331289600001,0.07831545344000002],[0.5667107076150002,0.07893889048500002],[0.5707786748150001,0.07950529128500002],[0.575250624,0.08012793600000001],[0.579719624415,0.080750165685],[0.5837797932150001,0.081315468885],[0.5882431641600001,0.08193690624000001],[0.5927035863350001,0.08255792856500002],[0.59716105974,0.08317853586],[0.60121074944,0.08374236416],[0.6056625933750001,0.08436217912500002],[0.61011148854,0.08498157906],[0.6145574349349999,0.08560056396500001],[0.61900043256,0.08621913384],[0.6230369624600002,0.08678110994],[0.6274743306150001,0.087398887485],[0.63190875,0.08801625],[0.6363402206150001,0.08863319748500001],[0.64076874246,0.08924972994000001],[0.64479211256,0.08980985384000001],[0.6492150049350001,0.09042559396500001],[0.65363494854,0.09104091906000002],[0.6580519433750001,0.091655829125],[0.6624659894400001,0.09227032416000001],[0.666877086735,0.092884404165],[0.67128523526,0.09349806914],[0.67529008416,0.09405558624],[0.679692603215,0.09466845888500003],[0.6840921735,0.0952809165],[0.6884887950149999,0.095892959085],[0.6928824677600001,0.09650458664000001],[0.6972731917350001,0.09711579916500002],[0.7016609669400001,0.09772659666000003],[0.7060457933750001,0.09833697912500002],[0.71042767104,0.09894694656000001],[0.7148065999350001,0.09955649896500002],[0.71918258006,0.10016563634000002],[0.723555611415,0.10077435868500001],[0.7279256940000001,0.10138266600000001],[0.732292827815,0.10199055828500002],[0.73665701286,0.10259803554000001],[0.741018249135,0.10320509776500002],[0.74537653664,0.10381174496000001],[0.7497318753750002,0.10441797712500002],[0.7540842653400002,0.10502379426000003],[0.7584337065350001,0.10562919636500001],[0.7627801989600002,0.10623418344000002],[0.767123742615,0.106838755485],[0.7714643375000001,0.10744291250000002],[0.7758019836150001,0.108046654485],[0.7801366809600001,0.10864998144000002],[0.784468429535,0.109252893365],[0.7887972293400001,0.10985539026000002],[0.793123080375,0.11045747212500001],[0.7974459826400001,0.11105913896000001],[0.801765936135,0.11166039076500002],[0.80608294086,0.11226122754000001],[0.8103969968150001,0.11286164928500002],[0.815099876615,0.113516181485],[0.8194077669600002,0.11411573544000002],[0.8237127085350001,0.11471487436500002],[0.8280147013400001,0.11531359826000001],[0.8323137453750001,0.11591190712500002],[0.83660984064,0.11650980096],[0.8409029871350001,0.11710727976500002],[0.845583056615,0.117758601485],[0.8498700375000001,0.11835521250000001],[0.8541540696150001,0.11895140848500002],[0.8584351529600001,0.11954718944000002],[0.8627132875350001,0.12014255536500003],[0.867376980375,0.12079157212500001],[0.8716489493400001,0.12138607026],[0.8759179695350001,0.12198015336500001],[0.8801840409600001,0.12257382144000001],[0.8848345740000001,0.12322098600000002],[0.8890944798150001,0.12381378628500003],[0.8933514368600001,0.12440617154],[0.8976054451350001,0.12499814176500003],[0.9022428183750001,0.12564345412500003],[0.9064906610400001,0.12623455656000002],[0.910735554935,0.126825243965],[0.91497750006,0.12741551634],[0.9196017135,0.1280589765],[0.9238374930150001,0.12864838108500004],[0.92807032376,0.12923737064000002],[0.9326845942400002,0.12987943136000002],[0.9369112593750001,0.13046755312500002],[0.94113497574,0.13105525986000002],[0.94573930326,0.13169592114],[0.9499568540150001,0.13228276008500003],[0.954554455415,0.132922474685],[0.95876584056,0.13350844584000002],[0.962974276935,0.13409400196500001],[0.9675619353750002,0.13473231712500003],[0.97176420614,0.13531700546],[0.9763451384600002,0.13595437394],[0.9805412436150001,0.13653819448500001],[0.9847344,0.1371216],[0.98930538936,0.13775756904],[0.9934923801350001,0.13834010676500003],[0.9980566433750001,0.138975129125],[1.00223746854,0.13955679906000001],[1.0067950056600001,0.14019087474000003],[1.010969665215,0.140771676885],[1.015520476215,0.141404805885],[1.01968897016,0.14198474024000002],[1.02423305504,0.14261692256],[1.0283953833750001,0.143195989125],[1.0329327421350003,0.143827224765],[1.03708890486,0.14440542354000002],[1.0416195375,0.1450357125],[1.045769534615,0.145613043485],[1.0502934411350002,0.146242385765],[1.054813838375,0.146871234125],[1.05895445304,0.14744724456],[1.0634681241600001,0.14807514624],[1.067602573215,0.148650288885],[1.072109518215,0.14927724388500002],[1.0762378016599998,0.14985151874000002],[1.0807380205400001,0.15047752706],[1.0852347301400003,0.15110304146],[1.089353631135,0.15167599576500002],[1.0938436146150001,0.152300563485],[1.098330088815,0.152924637285],[1.10243960736,0.15349627104000002],[1.10691935544,0.15411939816000003],[1.1113955942400002,0.15474203136],[1.115495730335,0.155312344565],[1.119965243015,0.155934031085],[1.124431246415,0.156555223685],[1.128893740535,0.15717592236500003],[1.13298127734,0.15774446226000005],[1.13743704534,0.15836421426000002],[1.14188930406,0.15898347234000001],[1.1459674584150004,0.15955069168500005],[1.1504129910150003,0.16016900308500004],[1.154855014335,0.16078682056500002],[1.1592935283750003,0.16140414412500004],[1.163728533135,0.16202097376500002],[1.16779087136,0.16258596704000003],[1.17221915,0.16320185000000004],[1.17664391936,0.16381723904],[1.18106517944,0.16443213416000002],[1.18548293024,0.16504653536000002],[1.18989717176,0.16566044264000002],[1.193940477015,0.166222757085],[1.1983479924150002,0.16683571768500005],[1.2027519985350001,0.16744818436500003],[1.207152495375,0.16806015712500003],[1.2115494829350002,0.16867163596500004],[1.2159429612150001,0.169282620885],[1.2203329302150001,0.16989311188500003],[1.224719389935,0.170503108965],[1.2291023403749999,0.171112612125],[1.233481781535,0.17172162136500005],[1.23749318646,0.17227944594000003],[1.2418659015,0.1728875085],[1.2462351072600002,0.17349507714000004],[1.25060080374,0.17410215186000003],[1.25496299094,0.17470873266],[1.2593216688600002,0.17531481954000003],[1.2636768375,0.1759204125],[1.2680284968600002,0.17652551154],[1.27237664694,0.17713011666],[1.27672128774,0.17773422786000004],[1.2814240218150001,0.17838812428500003],[1.2857613516150002,0.178991206485],[1.2900951721350002,0.179593794765],[1.2944254833750002,0.180195889125],[1.298752285335,0.18079748956500002],[1.303075578015,0.18139859608500003],[1.307395361415,0.18199920868500002],[1.3117116355350003,0.18259932736500004],[1.3160244003750001,0.183198952125],[1.320333655935,0.183798082965],[1.324998056,0.18444658400000002],[1.3293000005600002,0.18504468584000003],[1.3335984358400002,0.18564229376000002],[1.3378933618400002,0.18623940776],[1.3421847785600003,0.18683602784000003],[1.3464726860000003,0.18743215400000005],[1.3511139589349999,0.188077399965],[1.355394555375,0.18867249712500003],[1.359671642535,0.18926710036500002],[1.3639452204150002,0.18986120968500003],[1.3685709696600001,0.19050427074000004],[1.3728372365400001,0.19109735106000003],[1.3770999941400002,0.19168993746000001],[1.38135924246,0.19228202994000002],[1.385969468015,0.19292290608500004],[1.3902214053350002,0.19351396956500003],[1.3944698333750003,0.19410453912500003],[1.39906833696,0.19474376544],[1.4033094540000002,0.19533330600000004],[1.40754706176,0.19592235264000002],[1.4121338433750001,0.19655992912500003],[1.4163641401350002,0.19714794676500003],[1.420590927615,0.197735470485],[1.4251659872600002,0.19837139714000002],[1.42938546374,0.19895789186],[1.433952603135,0.19959270376500005],[1.438164768615,0.20017816948500003],[1.4423734248150002,0.20076314128500003],[1.4469288422400002,0.20139630336],[1.4511301874400002,0.20198024616000004],[1.455677684615,0.202612293485],[1.459871718815,0.20319520728500004],[1.4644112957400002,0.20382613986000003],[1.4685980189400003,0.20440802466000005],[1.473129675615,0.205037842485],[1.4773090878150004,0.20561869828500007],[1.48183282424,0.20624740136000003],[1.48600492544,0.20682722816000002],[1.4905207416150001,0.20745481648500003],[1.494685531815,0.20803361428500003],[1.49919342774,0.20866008786],[1.50335090694,0.20923785666],[1.507850882615,0.20986321548500003],[1.5123467397600001,0.21048799464000004],[1.51649310624,0.21106419936],[1.5209810431350002,0.21168786376500004],[1.5254648615,0.2123109485],[1.5296001152599998,0.21288558914],[1.534076013375,0.21350755912500002],[1.538203956135,0.21408117076500002],[1.5426719340000001,0.21470202600000005],[1.547135793335,0.21532230156500004],[1.55159553414,0.21594199746000003],[1.5557085624600002,0.21651350994000004],[1.560160383015,0.21713209108500003],[1.5646080850400002,0.21775009256000005],[1.56871000064,0.21832004096000002],[1.573149782415,0.21893692768500003],[1.57758544566,0.21955323474000002],[1.5820169903750003,0.22016896212500003],[1.58644441656,0.22078410984000002],[1.5905276160000001,0.22135142400000005],[1.5949471219350002,0.221965456965],[1.5993625093400001,0.22257891026],[1.6037737782150003,0.22319178388500005],[1.60818092856,0.22380407784],[1.6125839603750003,0.22441579212500007],[1.61698287366,0.22502692674],[1.6210397535,0.22559053650000005],[1.6254307465350002,0.22620055636500003],[1.62981762104,0.22680999656000003],[1.634200377015,0.22741885708500004],[1.6385790144600003,0.22802713794000004],[1.642953533375,0.22863483912500002],[1.64732393376,0.22924196064000002],[1.6516902156150002,0.22984850248500002],[1.6560523789400001,0.23045446466000002],[1.6604104237350001,0.23105984716500003],[1.66476435,0.23166465000000003],[1.669114157735,0.23226887316500003],[1.6734598469400002,0.23287251666000003],[1.677801417615,0.23347558048500003],[1.6821388697600002,0.23407806464000003],[1.686472203375,0.23467996912500003],[1.6908014184600002,0.23528129394000002],[1.6951265150150003,0.23588203908500005],[1.6997797053750001,0.23652834712500004],[1.7040962480600002,0.23712788834000004],[1.708408672215,0.23772684988500004],[1.71271697784,0.23832523176000003],[1.7170211649350002,0.238923033965],[1.7213212335,0.23952025650000003],[1.7256171835350003,0.24011689936500002],[1.7302389853350002,0.24075878956500002],[1.7345263815,0.24135422850000002],[1.7388096591350002,0.24194908776500001],[1.7430888182400002,0.24254336736000004],[1.7476925375000003,0.24318271250000004],[1.7519631427350002,0.24377578816500003],[1.75622962944,0.24436828416000003],[1.7604919976150002,0.24496020048500003],[1.765077634335,0.24559700056500003],[1.76933144864,0.24618771296000003],[1.773581144415,0.24677784568500002],[1.778153133935,0.24741272496500005],[1.7823942758399998,0.24800165376000005],[1.786631299215,0.24859000288500005],[1.7911896415350002,0.24922296136500005],[1.7954181110400003,0.24981010656000005],[1.7999672415000003,0.25044176850000005],[1.804187157135,0.251027709765],[1.8087270757350002,0.25165807516500005],[1.8129384375000004,0.2522428125],[1.8171456807350002,0.252826970165],[1.821671952135,0.253455414765],[1.8258706415000003,0.2540383685],[1.8303877010400003,0.25466551656],[1.8345778365350003,0.25524726636500006],[1.839085684215,0.25587311788500006],[1.843588755375,0.25649829712500005],[1.8477659016599999,0.25707821874000003],[1.85225976096,0.25770210144],[1.8564283533750001,0.25828081912500006],[1.860913000815,0.258903405285],[1.8653928717350001,0.25952531916500005],[1.86954847494,0.26010220866],[1.874019134,0.260722826],[1.8781661833350003,0.26129851156500006],[1.8826276305350003,0.26191783236500005],[1.8870843012150003,0.26253648088500003],[1.891536195375,0.263154457125],[1.89566582016,0.26372769024000003],[1.9001085024600002,0.26434436994000005],[1.9045464082400003,0.26496037736000005],[1.9086630438149998,0.265531782285],[1.913091737735,0.266146493165],[1.9175156551349999,0.26676053176500003],[1.9219347960150002,0.267373898085],[1.926349160375,0.2679865921250001],[1.9307587482150002,0.26859861388500006],[1.93484908856,0.26916631784000006],[1.9392494645400005,0.26977704306000005],[1.943645064,0.27038709600000005],[1.94803588694,0.27099647666000004],[1.9524219333600001,0.27160518504000003],[1.9568032032600002,0.27221322114],[1.9611796966400001,0.27282058496000006],[1.9655514135,0.27342727650000004],[1.9699183538399998,0.27403329576],[1.9742805176600002,0.27463864274000005],[1.9786379049599998,0.27524331744],[1.9829905157400003,0.27584731986000005],[1.9873383500000004,0.27645065],[1.99168140774,0.27705330786000004],[1.9960196889600004,0.27765529344000006],[2.00035319366,0.27825660674],[2.0046819218400005,0.2788572477600001],[2.0090058735,0.27945721650000005],[2.01332504864,0.28005651296],[2.01763944726,0.28065513714000007],[2.022256716735,0.28129577416500007],[2.026561221135,0.28189300576500004],[2.030860949015,0.28248956508500006],[2.035155900375,0.283085452125],[2.0394460752150003,0.28368066688500004],[2.0440373906400002,0.28431765096],[2.04831767126,0.28491147314000004],[2.05259317536,0.28550462304],[2.05686390294,0.28609710066000005],[2.0614343820150003,0.28673115208500005],[2.0656952153750003,0.28732223712500005],[2.069951272215,0.2879126498850001],[2.07450603264,0.28854448896000007],[2.0787521952600008,0.28913350914],[2.083296354735,0.289763856165],[2.087532623135,0.29035148376500003],[2.091764115015,0.29093843908500006],[2.09629255584,0.29156657376],[2.1005141535000003,0.29215213650000005],[2.105031993375,0.29277877912500005],[2.109243696815,0.29336294928500006],[2.11375093574,0.29398809986],[2.1179527449599997,0.29457087744],[2.122449382935,0.29519453596500006],[2.1266412979349996,0.29577592096500005],[2.13112733496,0.29639808744000007],[2.13530935574,0.2969780798600001],[2.1397847918150004,0.29759875428500004],[2.14425474464,0.29821865696000005],[2.1484217535,0.29879653650000004],[2.152881105375,0.29941494712500005],[2.1573349740000003,0.30003258600000005],[2.1614869709400004,0.3006083526600001],[2.165930238615,0.301224499485],[2.17036802304,0.30183987456000005],[2.174800324215,0.302454477885],[2.1789321915350004,0.303027411365],[2.1833538917600004,0.30364052264],[2.187770108735,0.3042528621650001],[2.19218084246,0.30486442994000007],[2.196586092935,0.3054752259650001],[2.200692712935,0.30604460596500005],[2.20508736246,0.30665390994],[2.2094765287350002,0.30726244216500004],[2.21386021176,0.3078702026400001],[2.218238411535,0.308477191365],[2.22261112806,0.3090834083400001],[2.226978361335,0.3096888535650001],[2.23134011136,0.31029352704000007],[2.2356963781350006,0.31089742876500004],[2.24004716166,0.31150055874000004],[2.244392461935,0.31210291696500003],[2.2487322789600004,0.31270450344000006],[2.253066612735,0.31330531816500007],[2.25739546326,0.31390536114000006],[2.261718830535,0.31450463236500004],[2.2663243785350002,0.31514300436500003],[2.27063641376,0.31574068064000005],[2.274942965735,0.31633758516500005],[2.2792440344600005,0.31693371794],[2.283539619935,0.3175290789650001],[2.288115534015,0.31816328008500006],[2.2923997874400004,0.31875704616000006],[2.296678557615,0.31935004048500004],[2.3009518445400006,0.31994226306000006],[2.3055039735000005,0.32057311650000003],[2.3097659283750005,0.32116374412500004],[2.3140224,0.32175360000000003],[2.3185565926400002,0.32238192896000006],[2.322801732215,0.32297018988500004],[2.3273238373350003,0.32359681756500003],[2.33155764486,0.32418348354000004],[2.33606766246,0.32480840994000004],[2.3402901379350003,0.32539348096500004],[2.3445071301600002,0.32597778024000007],[2.34899921144,0.32660018216000003],[2.353485054,0.32722170600000006],[2.357684865375,0.3278035871250001],[2.362158620415,0.32842340968500006],[2.3663470997400005,0.3290036958600001],[2.3708087672600002,0.32962181714000005],[2.3752641960600003,0.33023906034000006],[2.379435494535,0.33081692836500004],[2.3838788358150005,0.33143247028500006],[2.3883159383750003,0.3320471341250001],[2.3924700560000005,0.33262258400000005],[2.3968950710400003,0.3332355465600001],[2.4013138473600004,0.33384763104000004],[2.4057263849600004,0.33445883744000005],[2.41013268384,0.33506916576000007],[2.4142579230150005,0.33564055108500007],[2.4186521343750003,0.336249178125],[2.4230401070150003,0.33685692708500004],[2.4274218409350006,0.33746379796500003],[2.4317973361350003,0.33806979076500004],[2.4361665926150002,0.33867490548500007],[2.440529610375,0.339279142125],[2.444886389415,0.33988250068500003],[2.449236929735,0.34048498116500003],[2.4535812313350003,0.3410865835650001],[2.4579192942150003,0.341687307885],[2.462251118375,0.34228715412500005],[2.4665767038150004,0.34288612228500004],[2.4711658025600003,0.34352156384000004],[2.4754785206400003,0.34411872096000007],[2.479785,0.34471500000000005],[2.48408524064,0.3453104009600001],[2.4883792425599998,0.34590492384000004],[2.4929347838150004,0.34653564228500006],[2.4972159183750002,0.3471283541250001],[2.5014908142150003,0.34772018788500003],[2.50602605526,0.34834804914000006],[2.5102880837400003,0.3489380718600001],[2.5145438735,0.34952721650000007],[2.519058814335,0.35015222056500006],[2.523301736735,0.350739554165],[2.5278030060000005,0.35136263400000006],[2.5320330610400004,0.35194815656000006],[2.536520658735,0.35256931216500004],[2.5407378464150003,0.35315302368500007],[2.54521177254,0.35377225506000004],[2.54941609286,0.35435415554000005],[2.5538763474149997,0.354971462685],[2.55832955904,0.35558777856000007],[2.5625143833600004,0.3561669350400001],[2.5669539234150003,0.35678132668500007],[2.57138642054,0.3573947270600001],[2.57555174886,0.35797113954000004],[2.5799705744150003,0.35858261568500005],[2.58438235704,0.35919310056000003],[2.5887870967350004,0.3598025941650001],[2.5931847935,0.3604110965],[2.5973173685399997,0.36098289906000003],[2.6017013937350004,0.36158947716500006],[2.606078376,0.36219506400000007],[2.6104483153349998,0.36279965956500004],[2.61481121174,0.3634032638600001],[2.619167065215,0.3640058768850001],[2.62351587576,0.36460749864],[2.627857643375,0.3652081291250001],[2.63219236806,0.36580776834000006],[2.6367744,0.36644160000000003],[2.641094624535,0.3670391983650001],[2.6454078061400006,0.3676358054600001],[2.6497139448149998,0.3682314212850001],[2.65401304056,0.36882604584000006],[2.6585573477400004,0.36945456786],[2.662841943335,0.370047151565],[2.6671194959999998,0.3706387440000001],[2.6716409928600005,0.3712640555400001],[2.6759040453750003,0.3718536071250001],[2.68016005496,0.37244216744],[2.6846587415000003,0.3730642685000001],[2.688900250935,0.37365078796500006],[2.6933835843750003,0.37427072812500006],[2.6976105936600003,0.37485520674000006],[2.702078574,0.375472986],[2.7062910831350004,0.3760554237650001],[2.710743710375,0.3766710421250001],[2.715188441735,0.37728554916500007],[2.7193789935000003,0.37786489650000005],[2.7238083717600006,0.37847724264000004],[2.7282298541400003,0.3790884774600001],[2.7326434406400004,0.37969860096],[2.736804577815,0.38027380828500007],[2.7412028112150004,0.3808817708850001],[2.7455931487350003,0.38148862216500007],[2.7499755903750005,0.38209436212500003],[2.754350136135,0.382698990765],[2.7587167860150004,0.38330250808500005],[2.763075540015,0.38390491408500005],[2.7674263981350005,0.3845062087650001],[2.771769360375,0.3851063921250001],[2.7761044267350004,0.38570546416500007],[2.780431597215,0.3863034248850001],[2.7847508718150005,0.38690027428500007],[2.7893015400600003,0.3875290763400001],[2.79360458424,0.38812364136],[2.7978997325400004,0.38871709506000013],[2.80218698496,0.38930943744000013],[2.806703852015,0.389933482085],[2.8109748740150002,0.3905235400850001],[2.81547460896,0.39114517344000005],[2.81972940054,0.39173294706000006],[2.8239762962399997,0.39231960936000004],[2.828450564535,0.39293765836500005],[2.8326812298150004,0.3935220362850001],[2.8371383660000005,0.3941376740000001],[2.841586704615,0.39475207348500013],[2.8457928049350003,0.395332993965],[2.8502240114400004,0.39594498216],[2.854646420375,0.39655573212500006],[2.8590600317400003,0.3971652438600001],[2.8632332325600003,0.39774153384000005],[2.8676297118150007,0.3983486342850001],[2.8720173935,0.3989544965000001],[2.876396277615,0.39955912048500003],[2.8807663641600003,0.40016250624000005],[2.885127653135,0.40076465376500003],[2.88948014454,0.40136556306000004],[2.8938238383750003,0.40196523412500007],[2.8981587346400004,0.4025636669600001],[2.9024848333350004,0.4031608615650001],[2.9068021344600004,0.40375681794000007],[2.9113371576600002,0.40438280274000005],[2.915636400615,0.404976217485],[2.919926846,0.405568394],[2.9244336,0.40619040000000006],[2.9287059872150003,0.40678003488500003],[2.93296957686,0.4073684315400001],[2.93744806166,0.4079864587400001],[2.9416935931349997,0.40857231376500003],[2.9461530693350007,0.4091876655650001],[2.95038054264,0.40977097896000003],[2.95482101024,0.4103836553600001],[2.95925172984,0.4109949597600001],[2.963451884375,0.411574428125],[2.9678635953750003,0.41218305712500003],[2.972265558375,0.4127903141250001],[2.976657773375,0.41339619912500014],[2.981040240375,0.414000712125],[2.985412959375,0.41460385312500003],[2.989775930375,0.4152056221250001],[2.9941291533750007,0.41580601912500015],[2.998472628375,0.416405044125],[3.0028063553750006,0.41700269712500004],[3.0071303343749998,0.41759897812500013],[3.011444565375,0.41819388712500005],[3.0159640166400004,0.41881706496000004],[3.0202582642399998,0.4194091613600001],[3.0245427638400004,0.41999988576],[3.029030997135,0.42061866976500006],[3.0332955133350006,0.4212065815650001],[3.037550281535,0.421793121365],[3.0420072968599996,0.42240751154000006],[3.0464535650149998,0.4230203890850001],[3.0506781144150006,0.42360267568500004],[3.0551034,0.4242126000000001],[3.059517938415,0.424821011685],[3.0637122690150003,0.42539904508500004],[3.0681058248600004,0.4260045035400001],[3.0724886335350003,0.4266084493650001],[3.0768606950399997,0.42721088256000006],[3.081222009375,0.427811803125],[3.0855725765399997,0.4284112110600001],[3.0899123965350004,0.429009106365],[3.09424146936,0.4296054890400001],[3.0987651615000003,0.4302286485000001],[3.103072228215,0.4308219338850001],[3.10736854776,0.43141370664000006],[3.111654120135,0.43200396676500014],[3.1161322403750003,0.4326207121250001],[3.12039580664,0.4332078749600001],[3.1248508728599997,0.4338213755400001],[3.1290924330150007,0.43440544108500007],[3.1335244452149995,0.435015696885],[3.137944662335,0.43562429256500007],[3.1423530843750003,0.43623122812500004],[3.1465501205399997,0.43680902706000013],[3.15093548856,0.43741271784],[3.1553090615,0.4380147485000001],[3.1596708393600004,0.43861511904000006],[3.1640208221400004,0.4392138294600001],[3.1683590098399996,0.43981087976000005],[3.17268540246,0.4404062699400001],[3.1771958275510266,0.44102694642518603],[3.1814926864394257,0.441617961088062],[3.1857678822898126,0.44220552757425],[3.190214313964448,0.442816127684352],[3.1946372150906317,0.443422985589206],[3.1988458670837705,0.443999969203842],[3.203222946915584,0.444599544674816],[3.2075767177504937,0.445195418085294],[3.2120950128419055,0.445813266723582],[3.216401385274124,0.446401617277776],[3.2206846767772084,0.446986307096954],[3.2251296713753406,0.447592529960522],[3.229366030527264,0.448169781371136],[3.2337622155,0.448768272],[3.238133602347936,0.449362837073664],[3.242480276213088,0.449953492019712],[3.246802322237472,0.450540252265728],[3.2512783568484847,0.451147335988778],[3.2555503854002166,0.451726192458746],[3.2599745033242042,0.452325076575696],[3.2643722755694418,0.452919803027646],[3.2687437983703043,0.453510389252096],[3.2730891679611664,0.454096852686546],[3.277408480576404,0.454679210768496],[3.2817018324503917,0.455257480935446],[3.2861394826915844,0.455854564193178],[3.2905492661327256,0.456447264437262],[3.2949312910243984,0.457035601282514],[3.2992856656171874,0.45761959434375],[3.3036124981616766,0.458199263235786],[3.3079118969084496,0.458774627573438],[3.312347736382196,0.459367586257904],[3.316591547628,0.459934236672],[3.3209698951784894,0.460518188602398],[3.325319133987156,0.461097584728944],[3.329798839482092,0.46169365143060803],[3.334089157696279,0.462263835163634],[3.3385080211861444,0.462850395534618],[3.3428961109535624,0.46343215262925],[3.3472535622009008,0.464009130945962],[3.3515805101305265,0.464581354983186],[3.3558770899448085,0.465148849239354],[3.360295248920468,0.465731651102832],[3.3646811271388297,0.466309432808558],[3.369034874811744,0.46688222157465603],[3.3733566421510623,0.46745004461925],[3.3777939423359378,0.46803225121875003],[3.382051109912096,0.468590055605504],[3.386421904347956,0.469161956348144],[3.390759128969216,0.469728661520384],[3.3952058374304377,0.47030883063675],[3.3994753162578126,0.47086506440625],[3.4038523759554242,0.471434477438976],[3.408333792413408,0.472016577211392],[3.4126396655500635,0.472575016633974],[3.4170479902275517,0.473145859679286],[3.4214194884950557,0.473711039304182],[3.4257543621706876,0.47427059207775],[3.4300528130725594,0.474824554569078],[3.434447656268,0.475390012032],[3.4388042006620205,0.475949603356842],[3.443122667590604,0.476503368649296],[3.447532405248,0.47706786355200004],[3.451902199776116,0.477626260415984],[3.456232293248288,0.478178603104512],[3.4606485280027055,0.47874091354278203],[3.465023212590948,0.47929690277035203],[3.4693566110801406,0.479846618635722],[3.4737710267157786,0.480405546281634],[3.4781423300703125,0.48095793965625],[3.4824708084980465,0.481503850827666],[3.486875198827788,0.48205822616251204],[3.4912349675361876,0.48260586569975],[3.495550426595072,0.483146825968128],[3.4999367251715,0.483695513666],[3.504276953635488,0.484237277037312],[3.5086838485128795,0.484786161520758],[3.513042937954164,0.485327883146736],[3.5173545873050625,0.48586250811525],[3.5217278942245627,0.48640353883325],[3.526159554056004,0.486950494798896],[3.5305400257799797,0.48748983270115803],[3.534869733880928,0.488021629455872],[3.5392528524095,0.488558657978],[3.543583602593792,0.489087936401408],[3.5479636888776875,0.48962187394575],[3.552289851378588,0.490147863341712],[3.556661313710132,0.490677950051568],[3.5610748041556297,0.49121167137175803],[3.565430884297952,0.491736986293248],[3.569825012448228,0.492265392081072],[3.574160336327936,0.492785228593664],[3.5785297943522414,0.493307628174846],[3.5829301683243138,0.493832146690974],[3.5872685142871696,0.494347697126718],[3.591633970060544,0.494864866105856],[3.596023368820644,0.495383224718256],[3.600347726315744,0.495892262470656],[3.604776889909248,0.49641192411955204],[3.6091374035720003,0.496921812128],[3.6135120272135506,0.497431610804562],[3.6178977183927494,0.497940925606638],[3.6222122329075366,0.498440217918426],[3.6266124015260046,0.498947604273258],[3.631014723845276,0.499453378567824],[3.6353410830695014,0.499948591351086],[3.6397404518465,0.500450276366],[3.6440609202426884,0.500941096344474],[3.6484462326005,0.501437374262],[3.652819835768832,0.501930398650368],[3.657247669735424,0.502427564158976],[3.6615888696320003,0.502913069568],[3.665976703311284,0.503401844261616],[3.6703403580342404,0.503885989204122],[3.6746776378953667,0.504365304647346],[3.679109983404032,0.504853184135168],[3.6834461392123456,0.505328603642142],[3.687806468009984,0.505804844220416],[3.6921853007620715,0.506281310431766],[3.696577154942208,0.506757452462592],[3.7009767622479695,0.507232771145918],[3.7053254048956097,0.507701050357278],[3.709674664919959,0.508167996947954],[3.714071131330316,0.508638745256784],[3.7184569699355765,0.509107275739386],[3.7228284187235,0.509573421314],[3.7271821115716866,0.510037098463026],[3.7315610810859376,0.51050320621875],[3.7359591847646723,0.510971465558528],[3.7403274173759913,0.5114370998698461],[3.7447069168756504,0.511905005964962],[3.749093665306628,0.512375360762672],[3.7534444149193122,0.51284419233225],[3.757838296991904,0.513320822090496],[3.7621949340463683,0.513797422048794],[3.7665543329140627,0.51427931103125],[3.7709538370885625,0.51477180436925],[3.77532261137132,0.515268203751318],[3.779701629477632,0.515774418221568],[3.7840622597625133,0.516288479547774],[3.788413205791488,0.5168127159813121],[3.7927973144280003,0.517353799872],[3.797159302645171,0.517906328857442],[3.8015125713328093,0.5184731244900781],[3.8058711730310524,0.519057129357648],[3.810249824309948,0.5196614093263521],[3.814599380366941,0.5202798406789221],[3.8189347580445796,0.5209147270715581],[3.8233029652695665,0.521573263168146],[3.827652490573141,0.522247705567722],[3.8319950807108056,0.522939402007182],[3.836341255579222,0.5236494897483661],[3.840665412034784,0.524372990575616],[3.845009170254394,0.525116039108894],[3.8493428746743334,0.525872712865454],[3.853669669193504,0.526642516848896],[3.8579913382415003,0.5274247363460001],[3.862347811896572,0.5282257537541281],[3.8666606838605,0.5290301665020001],[3.8709666267486877,0.52984371054975],[3.875305624897908,0.530673169489392],[3.879633698507708,0.531509395384592],[3.883946494889938,0.53235071231475],[3.8882851898855,0.533204478602],[3.8926001894211724,0.534060296364528],[3.896885149983472,0.534916199925366],[3.9012332717651237,0.535790332617414],[3.9055421995650565,0.5366616708285441],[3.90985679972312,0.537538778854518],[3.9141188882827596,0.538409354353878],[3.918477429666398,0.5393038738807925],[3.922775442967696,0.54019440714246],[3.927090386014736,0.54109836523286],[3.931367942156176,0.54200448146726],[3.935661210063838,0.5429241150751926],[3.9399691269004338,0.5438573395860276],[3.944290637959168,0.54480422893568],[3.94857333385675,0.5457534076378125],[3.9528684807849337,0.5467163443529025],[3.957175055956864,0.5476931134606401],[3.961442080785194,0.5486722562698776],[3.96571945393975,0.5496653247490625],[3.9700061887206877,0.55067239362338],[3.9743013108859997,0.5516935379225001],[3.9785557457655516,0.55271718624402],[3.982865239186432,0.55376667868032],[3.987133091868112,0.55481876862462],[3.9914065009591537,0.5558851782582276],[3.995638292096,0.55695422096],[3.999920588420162,0.5580494678498076],[4.004160429467216,0.55914744094766],[4.008448147250026,0.5602718286041976],[4.0126926431887355,0.5613990355353601],[4.0169384672174075,0.5625409586380801],[4.021184829045033,0.5636976739882775],[4.0254309599147975,0.5648692577522926],[4.029676113529455,0.56605578616506],[4.033877352156249,0.5672453049609375],[4.038118849803055,0.5684619209510601],[4.042357273258112,0.56969371033712],[4.0465510782019996,0.5709286269575],[4.0507818746686235,0.5721909609457401],[4.055007735194014,0.5734686969149525],[4.059188494693504,0.57474969534704],[4.063403252126806,0.5760584320401225],[4.067611473535774,0.5773827985125526],[4.071774353757478,0.5787105605503425],[4.0759685445672975,0.5800663816991676],[4.080154888188032,0.5814380589963201],[4.084333018,0.5828256675000001],[4.088502603792482,0.5842292820080075],[4.092663352832197,0.5856489770325425],[4.096815010941327,0.58708482677478],[4.100992878137974,0.5885494392908025],[4.105125367997055,0.5900178520785601],[4.10928300206675,0.5915152394253125],[4.113395819686864,0.59301650794814],[4.11753291277475,0.5945469613803125],[4.121659550905857,0.5960940723647675],[4.125775800832,0.59765791232],[4.129881777766784,0.59923855211984],[4.133977646559034,0.6008360620657776],[4.138063622875749,0.6024505118590625],[4.142139974394607,0.6040819705725801],[4.146207022005999,0.6057305066225],[4.150296443264,0.60740911664],[4.154345761497999,0.6090920429175],[4.158417780745648,0.61080524285298],[4.162451356934223,0.61252282440174],[4.166508230484991,0.61427087614592],[4.170528524934447,0.61602337164098],[4.174543383298017,0.6177934024913675],[4.178582960365743,0.61959419170194],[4.182589148583685,0.6213995115614225],[4.186592481093193,0.6232225502248775],[4.190593947240831,0.62506336692432],[4.194594604762111,0.62692201987712],[4.198567301080191,0.62878524119792],[4.202541880426473,0.6306663469726774],[4.206519578966005,0.6325653924071225],[4.210473936385041,0.6344690097261074],[4.214434397783935,0.6363906095873599],[4.2183748947423325,0.6383167585331525],[4.222324657007901,0.6402609295378324],[4.226285221112191,0.6422231725179199],[4.230203868675967,0.6441763770036799],[4.234136953157456,0.6461476253682674],[4.238086168342261,0.6481369644176824],[4.241999365476351,0.6501170969395199],[4.245932487729103,0.6521152886905399],[4.249860498063999,0.65411785214],[4.253758499257248,0.6561109801896874],[4.257682224879045,0.6581221178450224],[4.261606762981497,0.6601374874724174],[4.265507179395087,0.6621431956923799],[4.269412288420477,0.6641529863365924],[4.273323634530303,0.666166736017632],[4.277229461566072,0.6681990770668635],[4.281130910888,0.6702679186915],[4.284997930913792,0.672359437479936],[4.288851742470464,0.674487232884412],[4.292687731331072,0.6766513048821761],[4.296479058078631,0.6788386214297185],[4.300267907310712,0.6810760543559835],[4.304048941550912,0.683363895670396],[4.307776205656063,0.6856767882117121],[4.311489435011,0.6880417532551876],[4.315165844507583,0.690447046962372],[4.318823339611072,0.692907011684676],[4.322441881256,0.6954106200355],[4.326022170376,0.6979600327455],[4.3295828353429995,0.7005704548549375],[4.333091538685975,0.7032192330625455],[4.3365691982509995,0.7059222539876875],[4.3400042855439995,0.7086702262395],[4.343387746486904,0.7114540145551196],[4.346757890953215,0.7143032758265281],[4.350077294776,0.7171834823205],[4.353370762396352,0.7201117401809161],[4.356619434489536,0.723065999545588],[4.359848935930136,0.7260634648738256],[4.363041931563544,0.7290813163814895],[4.366224170265368,0.7321366168972816],[4.369378527618056,0.7352053349950606],[4.372515869310376,0.7382900347308705],[4.375632047048,0.7413787472215001],[4.378750851625,0.7444875436640626],[4.381866484183304,0.7476035751494445],[4.384971586789,0.7507127923948126],[4.388087561,0.7538305301875001],[4.391189125,0.7569260859375001],[4.394311542280664,0.7600298729619496],[4.397442865792,0.7631257584360001],[4.400585668804552,0.7662127122393286],[4.4037417435009925,0.7692894808500361],[4.406894395272512,0.7723375155231962],[4.410079003728248,0.7753890266630716],[4.413259260065176,0.7784076929311456],[4.4164712491735045,0.7814266183232321],[4.419695290350344,0.7844262629377646],[4.422929419554496,0.7874043457132681],[4.426192126466048,0.7903774401507841],[4.429460743,0.7933246955625002],[4.432732000000001,0.7962435000000001],[4.436024953219865,0.7991510944980497],[4.439337427160728,0.8020456646031617],[4.442666973927424,0.8049253263505922],[4.446010892824,0.8077881328545002],[4.449366249541001,0.8106320807608127],[4.452729894934504,0.8134551165627947],[4.456124916462584,0.8162770092195597],[4.459517930226379,0.81908423266072],[4.46289239305274,0.82189668350056],[4.46627000378,0.8247320243199999],[4.469618346041967,0.82756108474657],[4.472989821601122,0.8304265286593899],[4.47632359724816,0.83327515707904],[4.47967410004262,0.8361520687352799],[4.48300913395574,0.8390284812325599],[4.48632543514064,0.8419003462681599],[4.489650563448523,0.84479052474499],[4.49295153098288,0.8476694004467199],[4.4962567934374995,0.85056089875],[4.499564532988438,0.8534627084912499],[4.5028729880092175,0.85637259680557],[4.50618045196046,0.8592884075202399],[4.50948527229008,0.86220805956352],[4.512785849344063,0.86512954538875],[4.516080635287812,0.86805092941375],[4.51936813303808,0.87097034647552],[4.52264689520546,0.87388600030024],[4.525915523047467,0.8767961619885699],[4.5292067080731195,0.8797295245772799],[4.53248554157456,0.8826545762406399],[4.53578521558544,0.88560053863936],[4.539070422104428,0.8885355137748099],[4.542339940932522,0.8914580220409899],[4.545627665587557,0.89439801021253],[4.54889775657968,0.89732309310592],[4.552184527860223,0.9002636362597899],[4.555451813771592,0.9031869681000699],[4.5587343192668826,0.9061238323528299],[4.562031495371052,0.90907343475631],[4.56530672678528,0.9120027289523199],[4.5685952432421875,0.9149429401562499],[4.571860168387812,0.91786082581375],[4.575137054600937,0.92078789444125],[4.578425387936562,0.92372340245875],[4.581724654449687,0.9266666062862499],[4.584997510539679,0.92958394734592],[4.588280058606852,0.9325073679315099],[4.59157180164806,0.9354361489746399],[4.5948351125675,0.9383365884699999],[4.598143665162417,0.9412738931463699],[4.601422624938597,0.94418135445829],[4.604746021349119,0.9471243387212799],[4.60803868633088,0.9500360097587199],[4.61133744181376,0.9529487271654399],[4.61464180736,0.95586179584],[4.617913667606697,0.9587414260546899],[4.621227761833437,0.9616531276712499],[4.624546030269777,0.9645631031502099],[4.627867992477957,0.9674706573901299],[4.631155365673339,0.9703421104069598],[4.634483245755019,0.9732427840808799],[4.6378133837547795,0.9761389591103199],[4.641107428363332,0.9789971200966299],[4.644440628845592,0.9818822833560699],[4.647774651392172,0.9847608705655899],[4.651109015565312,0.9876321866237499],[4.654443240927252,0.9904955364291099],[4.6578147235184595,0.9933826120722399],[4.6611472146874995,0.9962278337499999],[4.664478120272539,0.9990629959717598],[4.667844773834997,1.0019194346998899],[4.67120881715072,1.0047641539916798],[4.674569753216562,1.0075964347787498],[4.6779270850293795,1.0104155579927199],[4.681317967141279,1.01325224261632],[4.68470414137118,1.0160739934319198],[4.688085093774079,1.01888006685952],[4.691460310404979,1.0216697193191198],[4.694866673242812,1.0244729134337498],[4.698266115441919,1.0272577908044798],[4.70169533698064,1.0300538672281598],[4.705116392959999,1.0328296422399998],[4.708528734404959,1.0355843215782399],[4.711968749404062,1.0383466920287499],[4.715398731346939,1.0410858736453599],[4.718854821040159,1.0438301079270398],[4.72229949585842,1.0465489666304797],[4.725768621431682,1.0492701036040297],[4.729224885432319,1.0519635823820799],[4.732703849615359,1.05465642563584],[4.736204450675442,1.0573468061694697],[4.739689732519219,1.0600055877056798],[4.7431947325140795,1.0626587414195199],[4.746718278079976,1.0653042759990097],[4.750259150297727,1.0679401300800098],[4.753780963365477,1.0705383815610099],[4.757352846825311,1.0731488020637499],[4.7609034195118465,1.0757179571812898],[4.764500894278706,1.0782938791231298],[4.768074643554686,1.0808246289062498],[4.771691883228431,1.0833563751610298],[4.775316561367039,1.08586196862976],[4.778947050439519,1.0883387326988796],[4.782581666779062,1.0907839065287497],[4.7862515875827185,1.0932162929996796],[4.789954110505541,1.0956313144938696],[4.793654099196926,1.0980036608448098],[4.797381530778717,1.1003500396635697],[4.801101698748319,1.1026459782860796],[4.804874975527519,1.1049253565708796],[4.8086610230545075,1.107178448918888],[4.812452275114372,1.109420140956792],[4.816247785259008,1.111648784805888],[4.820046746025984,1.113862743732224],[4.823848489779844,1.116060412568184],[4.827681103397463,1.118256537478261],[4.83148659500627,1.120416559550463],[4.8353215837754995,1.1225712263929999],[4.8391848644344995,1.124717910667],[4.843048459640832,1.126839288676352],[4.846912779976703,1.128934013702144],[4.850778435166052,1.131000792953272],[4.854672208933032,1.1330519638923089],[4.858594170937676,1.135085189493293],[4.8624940390679035,1.1370726152253439],[4.86644942936393,1.1390516075332229],[4.870386173821921,1.140982821932849],[4.874356253468192,1.142889836533312],[4.878337049896687,1.144759452165125],[4.882331275164,1.146590967704],[4.886341928696889,1.148383769215297],[4.890396079197374,1.150147531211007],[4.894449653963008,1.151861078949888],[4.898506959715999,1.153525131976],[4.902595931460835,1.155149636762296],[4.906697646483749,1.156725605372771],[4.910840394041124,1.158262481630264],[4.914982451545946,1.1597438856325128],[4.9191290259719995,1.1611717803919999],[4.923308843717548,1.1625557621963278],[4.927503791270143,1.163889610153984],[4.931719164356916,1.165175320737176],[4.9359363506537415,1.166408051717369],[4.940184176994528,1.1675971217886079],[4.944419227746366,1.168731754956633],[4.948694352443828,1.169827524448408],[4.952964935821392,1.170874428595269],[4.957234227589252,1.171875521828472],[4.961530597190112,1.172839300106432],[4.965831924275999,1.1737626281359999],[4.970140611526804,1.1746481881507438],[4.9744587727095,1.175498532317],[4.978788242030592,1.176316086259712],[4.983130583375872,1.1771031525457918],[4.9874593048605185,1.177857166602991],[4.991802335247616,1.178585145317376],[4.996131711688704,1.179284457734144],[5.000475709289004,1.179961639779944],[5.004834589570516,1.180618376146776],[5.009178189793893,1.1812519132232409],[5.013535526298772,1.181868186975192],[5.017906218912215,1.182468566159733],[5.022257897695196,1.1830501347444988],[5.026620529748905,1.183618344734587],[5.0309931834396115,1.184174282970189],[5.035374770968986,1.184718956269953],[5.039730006331552,1.1852491898862718],[5.044090405776154,1.185769957161601],[5.048454440329216,1.186282024574976],[5.052856250005088,1.186790191480768],[5.057223070293419,1.1872868993923908],[5.061588227587808,1.1877768154026878],[5.065949738791812,1.188260450195875],[5.070343704389306,1.1887424240419588],[5.074692196845036,1.1892148286834958],[5.079069932482444,1.1896863796317838],[5.08347425649,1.190156668175],[5.0878365923599995,1.1906114407],[5.09222768025,1.191056114375],[5.09660684049,1.191486748175],[5.100973289,1.1919036175],[5.10536744409,1.1923107551749998],[5.10974785169,1.1927044921749999],[5.11411374224,1.1930850988],[5.11850631329,1.193456334175],[5.12288335089,1.1938147961749999],[5.12728656321,1.194164064575],[5.13167323536,1.1945009132],[5.1360426195599995,1.1948256046999999],[5.14043718144,1.1951414528],[5.14481346801,1.195445490575],[5.149214441,1.1957408575],[5.153596161,1.1960247575],[5.158002081,1.1963001574999998],[5.1623877800099995,1.1965644305749998],[5.16679719744,1.1968203728],[5.17118543556,1.1970655247],[5.1755517828899995,1.197300136175],[5.1799409,1.19752675],[5.18435278689,1.197745366175],[5.18874160929,1.1979538541749999],[5.19315273441,1.198154508575],[5.19753986576,1.1983453612],[5.20194883761,1.1985285425749999],[5.20633289609,1.198702245175],[5.21073833769,1.198868437175],[5.215117956,1.19902547],[5.21951850489,1.199175151175],[5.22393998436,1.1993174807],[5.22833451524,1.1994510462999999],[5.23270142961,1.199576082575],[5.23713670361,1.199695337575],[5.24149537841,1.1998050385749999],[5.24592241284,1.1999089583],[5.25032050944,1.2000048128],[5.25473820804,1.2000937823],[5.25912609761,1.200174992575],[5.263533156,1.20024947],[5.26790954384,1.2003164908],[5.27230467216,1.2003769292],[5.27671854096,1.2004307852],[5.28110067441,1.200477558575],[5.28550112484,1.2005178983],[5.2899198922499995,1.2005518043749999],[5.29430587161,1.2005789975749999],[5.2987097492899995,1.200599904175],[5.3031315252899995,1.200614524175],[5.30751947264,1.2006227967999998],[5.31192490449,1.2006249281749999],[5.31629568489,1.200621001175],[5.32073588004,1.2006109222999999],[5.32508847225,1.200595154375],[5.32951047921,1.200573234575],[5.33389661504,1.2005456848],[5.3382994222499995,1.200512279375],[5.34271890084,1.2004730182999999],[5.347101504,1.20042848],[5.35150037924,1.2003782263],[5.35591552656,1.2003222571999999],[5.3602928062499995,1.200261359375],[5.3646859635599995,1.2001948847],[5.36909499849,1.200122833175],[5.37351991104,1.2000452047999999],[5.37790577984,1.1999630608],[5.38230713664,1.1998754768],[5.38672398144,1.1997824527999998],[5.39110081449,1.199685253175],[5.39549275076,1.1995827487],[5.39989979025,1.199474939375],[5.40432193296,1.1993618252],[5.40870291684,1.1992449383],[5.413098624,1.19912288],[5.41750905444,1.1989956502999999],[5.42187738225,1.198864979375],[5.42631707049,1.198727473175],[5.430714281,1.1985866575],[5.43506845476,1.1984427287],[5.43949417529,1.198291899175],[5.44387648881,1.198138086575],[5.44827278025,1.1979793643749999],[5.45268304961,1.1978157325749998],[5.45704899236,1.1976494407],[5.46148703364,1.1974760543],[5.46588038289,1.197300136175],[5.47028734464,1.1971194368],[5.47464888836,1.1969364607],[5.47908289361,1.196746262575],[5.48347112025,1.196553914375],[5.48787259881,1.196356911575],[5.49222758244,1.1961580103],[5.49665538576,1.1959517612],[5.50103633841,1.195743738575],[5.50543018724,1.1955311863],[5.50983693225,1.195314104375],[5.51419594329,1.1950955591749999],[5.518628304,1.19486948],[5.52301257984,1.1946420608],[5.52740940096,1.1944102352],[5.53181876736,1.1941740032],[5.53617917769,1.193936737175],[5.54055178724,1.1936951863],[5.544998441,1.1934458575],[5.549333604,1.1931992299999998],[5.55374281121,1.1929448245749998],[5.55816421764,1.1926861343],[5.56253529344,1.1924268928],[5.56691822724,1.1921634863],[5.57131301904,1.1918959148],[5.57571966884,1.1916241783],[5.58013817664,1.1913482767999999],[5.58450516801,1.191072240575],[5.588883681,1.1907921575],[5.59327371561,1.190508027575],[5.59767527184,1.1902198508]]

    # 読み込んだ経路データをPoseArray型に変換
    points = gm.PoseArray()
    for i in range(len(p2)):
        pose = gm.Pose()
        pose.position.x = p2[i][0]
        pose.position.y = p2[i][1]
        points.poses.append(pose)

    ppc = PurePursuitControl(p2)

    rospy.sleep(2.0)
    init_pose = gm.PoseWithCovarianceStamped()
    init_pose.header.frame_id = 'map'
    init_pose.header.stamp = rospy.Time.now()
    init_pose.pose.pose.orientation.w = 1
    pub_initialpose.publish(init_pose)
    rospy.sleep(5.0)

    count = 0
    rate = rospy.Rate(50.0)
    while not rospy.is_shutdown():
        try:
            (linear, angular) = listener.lookupTransform('/map', '/base_footprint', rospy.Time(0))
        except (tf.LookupException, tf.ConnectivityException, tf.ExtrapolationException):
            continue

        points.header.frame_id = 'map'
        points.header.stamp = rospy.Time.now()
        pub_trajectory.publish(points)

        terget_pos = gm.PoseStamped()
        terget_pos.header.frame_id = 'map'
        terget_pos.header.stamp = rospy.Time.now()
        if count < len(p2):
            terget_pos.pose.position.x = p2[count][0]
            terget_pos.pose.position.y = p2[count][1]
        else:
            terget_pos.pose.position.x = p2[len(p2)-1][0]
            terget_pos.pose.position.y = p2[len(p2)-1][1]

        points.poses.append(pose)
        pub_terget_pos.publish(terget_pos)

        now_pose = [0,0,0]
        now_pose[0] = linear[0]
        now_pose[1] = linear[1]
        now_pose[2] = angular[2]

        twist = gm.Twist()
        if count < len(p2):
            twist.linear.x = ppc.getLiner(now_pose, count)
            twist.angular.z = ppc.getOmega(now_pose, count)
            if ppc.getDistance(now_pose, count) < 0.05:
                twist.linear.x = 0
                twist.angular.z = 0
        else:
            twist.linear.x = 0
            twist.angular.z = 0

        twist.linear.x = constrain(twist.linear.x, -0.22, 0.22)
        twist.angular.z = constrain(twist.angular.z, -2.84, 2.84)
        pub_vel.publish(twist)

        # rospy.loginfo("pose [%.2f %.2f %.2f]", linear[0], linear[1], linear[2])
        count += 1
        rate.sleep()

